<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ–‡4æŠã‚¯ã‚¤ã‚º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="tenmon_quiz.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    </head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="quiz-container" class="container w-full">

        <div class="flex justify-between items-center mb-6">
            
            <div class="flex items-center gap-4">
                <button id="home-button" class="hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg rounded-full shadow-md transition duration-150">
                    HOME
                </button>
                <h1 class="text-3xl font-bold text-gray-100">å¤©æ–‡ã‚¯ã‚¤ã‚º</h1> 
            </div>
            
            <div class="flex items-center gap-4">
                
                <div class="flex items-center gap-3">
                    <a href="https://www.instagram.com/cit.tenmon207/" target="_blank" rel="noopener noreferrer" class="sns-icon">
                        <i class="fa-brands fa-instagram fa-lg"></i>
                    </a>
                    <a href="https://x.com/Cittenmon" target="_blank" rel="noopener noreferrer" class="sns-icon">
                        <i class="fa-brands fa-x-twitter fa-lg"></i>
                    </a>
                </div>

                <div id="score-display" class="text-xl font-semibold text-sky-400 p-2 rounded-lg bg-gray-800 shadow-lg">
                    ã‚¹ã‚³ã‚¢: 0 / 0
                </div>
            </div>
		</div>
        <div id="game-area" class="question-card relative rounded-xl p-6 md:p-8">

            <div id="difficulty-select-screen" class="text-center">
                <h1 class="text-3xl font-bold text-gray-100 mb-2">å¤©æ–‡ã‚¯ã‚¤ã‚º</h1>
                <p class="text-xl text-sky-400 mb-8">é›£æ˜“åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„</p>

                <div class="flex flex-col gap-4">
                    <button onclick="selectDifficulty('1')" class="difficulty-button level-1 block w-full p-4 bg-gray-800 text-gray-100 font-semibold text-lg rounded-lg text-center shadow-md transition duration-200">
                        ãƒ¬ãƒ™ãƒ« 1
                    </button>
                    <button onclick="selectDifficulty('2')" class="difficulty-button level-2 block w-full p-4 bg-gray-800 text-gray-100 font-semibold text-lg rounded-lg text-center shadow-md transition duration-200">
                        ãƒ¬ãƒ™ãƒ« 2
                    </button>
                    <button onclick="selectDifficulty('3')" class="difficulty-button level-3 block w-full p-4 bg-gray-800 text-gray-100 font-semibold text-lg rounded-lg text-center shadow-md transition duration-200">
                        ãƒ¬ãƒ™ãƒ« 3
                    </button>
                    <button onclick="selectDifficulty('4')" class="difficulty-button level-4 block w-full p-4 bg-gray-800 text-gray-100 font-semibold text-lg rounded-lg text-center shadow-md transition duration-200">
                        ãƒ¬ãƒ™ãƒ« 4
                    </button>
                    <button onclick="selectDifficulty('5')" class="difficulty-button level-5 block w-full p-4 bg-gray-800 text-gray-100 font-semibold text-lg rounded-lg text-center shadow-md transition duration-200">
                        ãƒ¬ãƒ™ãƒ« 5
                    </button>
                </div>
				<div class="mt-8">
            <button id="show-ranking-button" class="px-6 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-bold text-lg rounded-full shadow-lg transition duration-150">
                ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¦‹ã‚‹
            </button>
				</div>
				<div id="ranking-display-area" 
                     class="hidden mt-6 p-4 bg-gray-900 rounded-lg text-left text-white"
                     style="max-height: 400px; overflow-y: auto;">
                    
                    <div id="ranking-level-select">
                        <h3 class="text-xl font-bold text-yellow-400 text-center mb-4">ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚° ğŸ†</h3>
                        <p class="text-center mb-4">è¦‹ã‚‹ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                        <div class="flex flex-col gap-3">
                            <button onclick="fetchAndDisplayRanking('1')" class="difficulty-button level-1 p-3">ãƒ¬ãƒ™ãƒ« 1</button>
                            <button onclick="fetchAndDisplayRanking('2')" class="difficulty-button level-2 p-3">ãƒ¬ãƒ™ãƒ« 2</button>
                            <button onclick="fetchAndDisplayRanking('3')" class="difficulty-button level-3 p-3">ãƒ¬ãƒ™ãƒ« 3</button>
                            <button onclick="fetchAndDisplayRanking('4')" class="difficulty-button level-4 p-3">ãƒ¬ãƒ™ãƒ« 4</button>
                            <button onclick="fetchAndDisplayRanking('5')" class="difficulty-button level-5 p-3">ãƒ¬ãƒ™ãƒ« 5</button>
                        </div>
                        <button onclick="closeRankingDisplay()" class="mt-4 w-full p-2 bg-gray-600 hover:bg-gray-700 rounded">é–‰ã˜ã‚‹</button>
                    </div>
                    
                    <div id="ranking-result-display" class="hidden">
                        </div>

                </div>

                <div class="absolute bottom-3 right-4">
                    <a href="secret.html" 
                        class="text-xs text-[#171c23] hover:text-sky-400 no-underline transition-colors"
                        title="?????????????">
                        *
                    </a>
                </div>
            </div>

            <div id="start-screen" class="text-center hidden">
                <h2 class="text-2xl font-bold mb-4 text-white">å®‡å®™ã®çŸ¥è­˜ã‚’è©¦ãã†ï¼</h2>
                <p class="text-gray-400 mb-6">ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚</p>
                <button id="start-button" class="px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-bold text-lg rounded-full shadow-xl transition duration-150 transform hover:scale-105">
                    ã‚¯ã‚¤ã‚ºã‚¹ã‚¿ãƒ¼ãƒˆ
                </button>
            </div>
            
            <div id="quiz-screen" class="hidden">
                <div class="mb-6">
                    <p id="question-number" class="text-sm font-medium text-sky-400 mb-2">å•é¡Œ 1 / 10</p>
                    <div id="question-area" class="text-xl md:text-2xl font-semibold text-gray-100 p-4 bg-gray-700 rounded-lg">
                        å•é¡Œæ–‡ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                    </div>
                </div>
                <div id="choices-area" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
                <div id="feedback-area" class="mt-6 h-8 text-center text-xl font-bold">
                </div>
            </div>

            <div id="exp-screen" class="hidden">
                <div class="mb-6">
                    <p class="text-lg font-semibold text-gray-100 mb-2">æ­£è§£</p>
                    <div id="answer-area" class="text-2xl md:text-3xl font-bold text-green-500 p-4 bg-gray-800 rounded-lg mb-4 text-center">
                    </div>
                    <p class="text-sm font-medium text-sky-400 mb-2">è§£èª¬</p>
                    <div id="exp-area" class="text-xl md:text-2xl font-semibold text-gray-100 p-4 bg-gray-700 rounded-lg" style="min-height: 100px;">
                    </div>
                </div>
                <div class="text-center">
                    <button id="next-button" class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg rounded-full shadow-xl transition duration-150 transform hover:scale-105">
                        æ¬¡ã¸é€²ã‚€
                    </button>
                </div>
            </div>
            
            <div id="result-screen" class="hidden text-center">
                <h2 id="result-title" class="text-3xl font-bold mb-4 text-yellow-300"></h2>
                <p id="final-score-text" class="text-5xl font-extrabold text-green-500 mb-6"></p>
                <p class="text-gray-400 mb-6">ã¾ãŸæŒ‘æˆ¦ã—ã¦ã€å®‡å®™åšå£«ã‚’ç›®æŒ‡ãã†ï¼</p>
                <a href="index.html" id="restart-button" class="inline-block no-underline px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg rounded-full shadow-xl transition duration-150 transform hover:scale-105">
                    ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤
                </a>
            </div>
        </div>
    </div>

    <script>
        // â–¼â–¼â–¼ JavaScriptã®å‡¦ç†é–‹å§‹ â–¼â–¼â–¼
		
		const GAS_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwJtvV_kbO7Hii05Ybiap3-DI4nRefUCTFrXsGf0BxMUopPMvgvjHDFWqfJEuilUlye_Q/exec";
        
        // --- 1. å…¨ãƒ¬ãƒ™ãƒ«ã®ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾© ---
        // const: å®šæ•°ï¼ˆä¸­èº«ãŒå¤‰ã‚ã‚‰ãªã„ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’å®£è¨€ã—ã¾ã™ã€‚
        // allQuizData: ã™ã¹ã¦ã®ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’ã¾ã¨ã‚ãŸã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã§ã™ã€‚
        // "1": [ ... ], "2": [ ... ] ã®ã‚ˆã†ã«ã€é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«ã”ã¨ã«ã‚¯ã‚¤ã‚ºã®é…åˆ—ï¼ˆãƒªã‚¹ãƒˆï¼‰ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
        // { question: "...", choices: ["...", ...], answer: "...", exp: "..." } ãŒ1å•åˆ†ã®ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚
        const allQuizData = {
            "1": [
                { question: "æœˆã¯åœ°çƒã®å‘¨ã‚Šã‚’å›ã‚ŠãªãŒã‚‰è‡ªè»¢ã—ã¦ã„ã¾ã™ã€‚æœˆã¯ç´„ä½•æ—¥ã§1å›è‡ªè»¢ã‚’ã™ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç´„1æ—¥", "ç´„27æ—¥", "ç´„60æ—¥", "ç´„243æ—¥"], answer: "ç´„27æ—¥", exp:"" },
                { question: "æ—¥æœ¬ã®ä¸€å¹´ã®ã†ã¡ã€ä¸€ç•ªæ˜¼ãŒçŸ­ã„æ—¥ã¯ã€æ¬¡ã®ã†ã¡ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æ˜¥åˆ†ã®æ—¥", "å¤è‡³", "ç§‹åˆ†ã®æ—¥", "å†¬è‡³"], answer: "å†¬è‡³", exp:"" },
                { question: "å›½éš›å¤©æ–‡å­¦é€£åˆã«ã‚ˆã‚‹ã¨ã€ç¾åœ¨æ˜Ÿåº§ã¯ä½•å€‹ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["44å€‹", "66å€‹", "88å€‹", "102å€‹"], answer: "88å€‹", exp:"" },
                { question: "è‡ªã‚‰å…‰ã‚’ç™ºã—ã¦ã„ã‚‹æ˜Ÿã‚’ãªã‚“ã¨ã„ã†ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æ’æ˜Ÿ", "æƒ‘æ˜Ÿ", "å…‰æ˜Ÿ", "å½—æ˜Ÿ"], answer: "æ’æ˜Ÿ", exp:"" },
                { question: "å¤ªé™½ç³»ã®æƒ‘æ˜Ÿã®ä¸­ã§æœ€ã‚‚å¤§ãã„ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["åœ°çƒ", "ç«æ˜Ÿ", "æœ¨æ˜Ÿ", "åœŸæ˜Ÿ"], answer: "æœ¨æ˜Ÿ", exp:"" },
                { question: "ç¾åœ¨ã®åŒ—æ¥µæ˜Ÿã¯æ¬¡ã®ã†ã¡ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ™ã‚¬", "ãƒãƒ©ãƒªã‚¹", "ã‚¨ãƒ©ã‚¤", "ãƒ‡ãƒãƒ–"], answer: "ãƒãƒ©ãƒªã‚¹", exp:"" },
                { question: "æ¬¡ã®ã†ã¡é»„é“12æ˜Ÿåº§ã«å«ã¾ã‚Œã¦ã„ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãŠã†ã—åº§", "ãŠãŠãã¾åº§", "ãŠã²ã¤ã˜åº§", "ã‚„ãåº§"], answer: "ãŠãŠãã¾åº§", exp:"" },
                { question: "æƒ‘æ˜Ÿã®å‘¨ã‚Šã‚’ã¾ã‚ã‚‹æ˜Ÿã‚’ãªã‚“ã¨å‘¼ã¶ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æ’æ˜Ÿ", "å°æƒ‘æ˜Ÿ", "è¡›æ˜Ÿ", "å‘¨æƒ‘æ˜Ÿ"], answer: "è¡›æ˜Ÿ", exp:"" },
                { question: "ä¸»æˆåˆ†ãŒæ°·ã¨å¡µã§ã‚ã‚Šã€åˆ¥åã»ã†ãæ˜Ÿã¨å‘¼ã°ã‚Œã‚‹æ˜Ÿã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["è¡›æ˜Ÿ", "æ°·æ˜Ÿ", "å¡µæ˜Ÿ", "å½—æ˜Ÿ"], answer: "å½—æ˜Ÿ", exp:"" },
                { question: "å†¬ã®å¤§ä¸‰è§’ã‚’æ§‹æˆã™ã‚‹æ˜Ÿã¯ã‚ªãƒªã‚ªãƒ³åº§ã®ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹ã€ãŠãŠã„ã¬åº§ã®ã‚·ãƒªã‚¦ã‚¹ã¨ã“ã„ã¬åº§ã®ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ™ã‚¬", "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ãƒ—ãƒ­ã‚­ã‚ªãƒ³", "ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³"], answer: "ãƒ—ãƒ­ã‚­ã‚ªãƒ³", exp:"" }
            ],
            "2": [
                { question: "å¤ªé™½ã¨åœ°çƒã®è·é›¢ã¯ä½•kmã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç´„100ä¸‡km", "ç´„5000ä¸‡km", "ç´„1å„„5000ä¸‡km", "ç´„5å„„km"], answer: "ç´„1å„„5000ä¸‡km", exp:"" },
                { question: "ç«æ˜Ÿã‚’è¡¨ã™æƒ‘æ˜Ÿè¨˜å·ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["â™€", "â™‚", "â™„", "â™ƒ"], answer: "â™‚", exp:"" },
                { question: "å¤ªé™½ã®è¡¨é¢æ¸©åº¦ã¯ç´„ä½•åº¦ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç´„6000â„ƒ", "ç´„10000â„ƒ", "ç´„12000â„ƒ", "ç´„16000â„ƒ"], answer: "ç´„6000â„ƒ", exp:"" },
                { question: "æœ€è¿‘ã€ãƒŸã‚¯ãƒ­ã®ç ”ç©¶ãŒç››ã‚“ãªã“ã¨ã§ã‚ˆãèãã€ŒÎ¼ã€ã‚„ã€Œnã€ã§ã™ãŒã€10ã®-9ä¹—ã‚’è¡¨ã™ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["Î¼ï¼ˆãƒã‚¤ã‚¯ãƒ­ï¼‰", "nï¼ˆãƒŠãƒï¼‰", "Ã…ï¼ˆã‚ªãƒ³ã‚°ã‚¹ãƒˆãƒ­ãƒ¼ãƒ ï¼‰", "mï¼ˆãƒŸãƒªï¼‰"], answer: "nï¼ˆãƒŠãƒï¼‰", exp:"" },
                { question: "æœ‰åãªæºå¹³åˆæˆ¦ã§ã™ãŒã€ã‚ã‚‹å¤©æ–‡çš„ãªç¾è±¡ãŒå‹æ•—ã‚’åˆ†ã‘ãŸæˆ¦ã„ãŒã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚ãã®ç¾è±¡ã¨ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æœˆé£Ÿ", "æ—¥é£Ÿ", "æ–°æœˆ", "å¤ªé™½ãƒ•ãƒ¬ã‚¢"], answer: "æ—¥é£Ÿ", exp:"" },
                { question: "å¤ªé™½ç³»ã®æƒ‘æ˜Ÿã®ä¸­ã§è¡›æ˜Ÿã‚’æŒãŸãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æœ¨æ˜Ÿ", "é‡‘æ˜Ÿ", "åœ°çƒ", "ç«æ˜Ÿ"], answer: "é‡‘æ˜Ÿ", exp:"" },
                { question: "ç¾åœ¨ã€ä¸–ç•Œã®å¤šãã®å›½ã€…ã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹å¤ªé™½æš¦ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒã‚¢ãƒ–æš¦", "ã‚°ãƒ¬ã‚´ãƒªã‚ªæš¦", "ãƒ¦ãƒªã‚¦ã‚¹æš¦", "ãƒ„ã‚©ãƒ«ã‚­ãƒ³æš¦"], answer: "ã‚°ãƒ¬ã‚´ãƒªã‚ªæš¦", exp:"" },
                { question: "ä¸»æˆåˆ†ã¯ã‚¬ã‚¹ã¨å¡µã§ã‚ã‚Šã€è‡ªã‚‰å…‰ã‚‰ãšèƒŒå¾Œã®æ˜Ÿã®å…‰ã‚’é®ã‚‹ã“ã¨ã§è¦³æ¸¬ã•ã‚Œã‚‹æ˜Ÿé–“é›²ã‚’ä½•ã¨ã„ã†ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æš—é»’æ˜Ÿé›²", "åå°„æ˜Ÿé›²", "æ•£å…‰æ˜Ÿé›²", "æƒ‘æ˜Ÿä¸Šæ˜Ÿé›²"], answer: "æš—é»’æ˜Ÿé›²", exp:"" },
                { question: "åŒ—æ¥µæ˜Ÿã‚’è¦‹ã¤ã‘ã‚‹éš›ã«ç”¨ã„ã‚‰ã‚Œã‚‹åŒ—æ–—ä¸ƒæ˜Ÿã¨ã‚«ã‚·ã‚ªãƒšãƒ¤åº§ã§ã™ãŒã€ã„ãšã‚Œã‚‚åŸºæº–ã¨ãªã‚‹ç·šã‚’ä½•å€ã™ã‚‹ã¨åŒ—æ¥µæ˜Ÿã«è¾¿ã‚Šç€ã‘ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["2å€", "3å€", "5å€", "8å€"], answer: "5å€", exp:"" },
                { question: "å¤©çƒä¸Šã«ãŠã‘ã‚‹å¤ªé™½ã®é€šã‚Šé“ã‚’ãªã‚“ã¨å‘¼ã¶ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["èµ¤é“", "é‡‘é“", "ç™½é“", "é»„é“"], answer: "é»„é“", exp:"" }
            ],
            "3": [
                { question: "åœ°çƒã§ä½“é‡30kgã®äººãŒæœˆé¢ã§ä½“é‡è¨ˆã«ä¹—ã‚‹ã¨ä½•kgã«ãªã‚‹ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["5kg", "10kg", "30kg", "180kg"], answer: "5kg", exp:"" },
                { question: "åœ°çƒã¯æœˆã®ä½•å€ã®å¤§ãã•ï¼ˆç›´å¾„ï¼‰ã‚’æŒã¤ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["2å€", "4å€", "6å€", "8å€"], answer: "4å€", exp:"" },
                { question: "æœ€è¿‘è©±é¡Œã¨ãªã£ãŸãƒ¬ãƒ¢ãƒ³å½—æ˜Ÿã¯ã€ä½•ã‹ã‚‰åä»˜ã‘ã‚‰ã‚ŒãŸã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç™ºè¦‹è€…", "è¦³æ¸¬åœ°", "è‰²", "å½¢"], answer: "è¦³æ¸¬åœ°", exp:"" },
                { question: "88æ˜Ÿåº§ã®ä¸­ã§ã€1ã¤ã®æ˜Ÿåº§ãŒ2ã¤ã®é ˜åŸŸã«åˆ†ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã†ãŠåº§", "ã¦ã‚“ã³ã‚“åº§", "ã¸ã³åº§", "ã—ã—åº§"], answer: "ã¸ã³åº§", exp:"" },
                { question: "ä¸‰å¤§æµæ˜Ÿç¾¤ã¨ã¯ã—ã¶ã‚“ãåº§æµæ˜Ÿç¾¤ã€ãƒšãƒ«ã‚»ã‚¦ã‚¹æµæ˜Ÿç¾¤ã¨ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã‚ªãƒªã‚ªãƒ³æµæ˜Ÿç¾¤", "ãŠã†ã—åº§æµæ˜Ÿç¾¤", "ã—ã—åº§æµæ˜Ÿç¾¤", "ãµãŸã”åº§æµæ˜Ÿç¾¤"], answer: "ãµãŸã”åº§æµæ˜Ÿç¾¤", exp:"" },
                { question: "å¤ªé™½ã®è¡¨é¢ã«ã¯ã€Œé»’ç‚¹ã€ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ãŒã€ãã®ç‰¹å¾´ã¨ã—ã¦ã€å½“ã¦ã¯ã¾ã‚‰ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["è¡¨é¢æ¸©åº¦ãŒå‘¨ã‚Šã‚ˆã‚Šä½ã„", "ç£å ´ãŒå‘¨ã‚Šã‚ˆã‚Šå¼·ã„", "å ´æ‰€ãŒå¤‰ã‚ã‚‹", "ç›´å¾„ç´„500km"], answer: "ç›´å¾„ç´„500km", exp:"" },
                { question: "ä¸€ç­‰æ˜Ÿã¯2ç­‰æ˜Ÿã®ä½•å€ã®æ˜ã‚‹ã•ã‚’ã‚‚ã¤ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç´„2å€", "ç´„2.5å€", "ç´„5å€", "ç´„10å€"], answer: "ç´„2.5å€", exp:"" },
                { question: "å¤ªé™½é¢¨ã¨ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["é¢¨", "ãƒ—ãƒ©ã‚ºãƒ", "å…‰", "åœ§åŠ›"], answer: "ãƒ—ãƒ©ã‚ºãƒ", exp:"" },
                { question: "æ¬¡ã®ã†ã¡ã€æ˜Ÿåº§ã«æã‹ã‚Œã¦ã„ãªã„å‹•ç‰©ã¯ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã†ã—", "ã¨ã‚‰", "ã†ã•ã", "ã¸ã³"], answer: "ã¨ã‚‰", exp:"" },
                { question: "å¤©ã®åŒ—æ¥µãŒã‚ã‚‹ã®ã¯ã“ãã¾åº§ã§ã™ãŒã€å¤©ã®å—æ¥µãŒã‚ã‚‹ã®ã¯ä½•åº§ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã—ã¶ã‚“ãåº§", "ã‚ãã¶ã‚“ãåº§", "ã¯ã¡ã¶ã‚“ãåº§", "ã˜ã‚…ã†ã¶ã‚“ãåº§"], answer: "ã¯ã¡ã¶ã‚“ãåº§", exp:"" }
            ],
            "4": [
                { question: "å¤ä»£ã‚®ãƒªã‚·ãƒ£èªã§æœ¨æ˜Ÿã®ã“ã¨ã‚’ãªã‚“ã¨å‘¼ã¶ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã‚¼ã‚¦ã‚¹", "ã‚¸ãƒ¥ãƒ”ã‚¿ãƒ¼", "ãƒ“ãƒ¼ãƒŠã‚¹", "ã‚¢ãƒ¬ã‚¹"], answer: "ã‚¼ã‚¦ã‚¹", exp:"" },
                { question: "æ–°æ½Ÿã‚’æœ¬æ‹ åœ°ã¨ã™ã‚‹ã‚µãƒƒã‚«ãƒ¼ãƒãƒ¼ãƒ ãƒ»é‡çƒãƒãƒ¼ãƒ ã®åç§°ã®ç”±æ¥ã«ã‚‚ãªã£ã¦ã„ã‚‹ã€æ©™è‰²ã¨é’è‰²ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãŒç¾ã—ã„ã¯ãã¡ã‚‡ã†åº§ã®äºŒé‡æ˜Ÿã¯ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ‡ãƒãƒ–", "ã‚¢ãƒ«ãƒ“ãƒ¬ã‚ª", "ã‚¢ãƒ«ã‚³ãƒ«", "ãƒ‡ãƒãƒœãƒ©"], answer: "ã‚¢ãƒ«ãƒ“ãƒ¬ã‚ª", exp:"" },
                { question: "å›½æ——ã«æã‹ã‚Œã¦ã„ã‚‹æ˜Ÿã«ã¯ãã‚Œãã‚Œä¸€ã¤ã®å·ãŒå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹å›½ã¯ã©ã“ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ¡ã‚­ã‚·ã‚³", "ä¸­å›½", "ã‚¢ãƒ¡ãƒªã‚«", "ãƒ–ãƒ©ã‚¸ãƒ«"], answer: "ãƒ–ãƒ©ã‚¸ãƒ«", exp:"" },
                { question: "ã‹ã¤ã¦æœ€ã‚‚å¤§ããªæ˜Ÿåº§ã§ã‚ã£ãŸã‚¢ãƒ«ã‚´èˆ¹åº§ã¯4ã¤ã«åˆ†å‰²ã•ã‚Œã¾ã—ãŸãŒã€ãã®4ã¤ã®æ˜Ÿåº§ã«å«ã¾ã‚Œãªã„ã®ã¯æ¬¡ã®ã†ã¡ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã‚‰ã—ã‚“ã°ã‚“åº§", "ãƒãƒ³ãƒ—åº§", "ã»åº§", "ã‚Šã‚…ã†ã“ã¤åº§"], answer: "ãƒãƒ³ãƒ—åº§", exp:"" },
                { question: "å¤ä»£ã‚®ãƒªã‚·ãƒ£èªã§æœˆã‚’ãªã‚“ã¨å‘¼ã¶ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã‚»ãƒ¬ãƒ¼ãƒ", "ãƒ«ãƒŠ", "ãƒªãƒ¥ãƒŒ", "ãƒ†ãƒƒãƒ©"], answer: "ã‚»ãƒ¬ãƒ¼ãƒ", exp:"" },
                { question: "ãƒ©ãƒ†ãƒ³èªã§ç©€ç‰©ã®ç©‚ã®æ„å‘³ã‚’æŒã¤æ˜Ÿã¯ã€æ¬¡ã®ã†ã¡ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ã‚·ãƒªã‚¦ã‚¹", "ãƒ—ãƒ­ã‚­ã‚ªãƒ³", "ã‚¹ãƒ”ã‚«", "ãƒªã‚²ãƒ«"], answer: "ã‚¹ãƒ”ã‚«", exp:"" },
                { question: "å¤©æ–‡å˜ä½(au)ã«ã¤ã„ã¦ã€é–“é•ã£ãŸèª¬æ˜æ–‡ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["å¤ªé™½-å†¥ç‹æ˜Ÿé–“ã¯ç´„40auã¨è¡¨ã•ã‚Œã‚‹", "åœ°çƒ-å¤ªé™½é–“ã®å¹³å‡è·é›¢ã«ç”±æ¥ã™ã‚‹å˜ä½ã§ã‚ã‚‹", "1auã‚’ç´„1å„„5000kmã¨ã™ã‚‹è·é›¢ã®å˜ä½ã§ã‚ã‚‹", "auã¨ã¯ã€astronomical unitã®ç•¥ç§°ã§ã‚ã‚‹"], answer: "å¤ªé™½-å†¥ç‹æ˜Ÿé–“ã¯ç´„40auã¨è¡¨ã•ã‚Œã‚‹", exp:"" },
                { question: "åœ°çƒä¸Šã§ã¯è¦³æ¸¬ã§ããªã„å¤©ä½“ç¾è±¡ã¯æ¬¡ã®ã†ã¡ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç«æ˜Ÿã®å¤ªé™½é€šé", "ãƒ—ãƒ¬ã‚¢ãƒ‡ã‚¹æ˜Ÿå›£é£Ÿ", "ãƒ–ãƒ©ãƒƒãƒ‰ãƒ ãƒ¼ãƒ³", "æœˆã®å¤©ç‹æ˜Ÿé£Ÿ"], answer: "ç«æ˜Ÿã®å¤ªé™½é€šé", exp:"" },
                { question: "åœ°çƒã®é‡åŠ›ã‚’æŒ¯ã‚Šåˆ‡ã£ã¦é€²ã‚€ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚‹ã€Œç¬¬äºŒå®‡å®™é€Ÿåº¦ã€ã®å€¤ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç´„7.9km/s", "ç´„9.8km/s", "ç´„11.2km/s", "ç´„16.7km/s"], answer: "ç´„11.2km/s", exp:"" },
                { question: "æ¬¡ã«æ—¥æœ¬ã§çš†æ—¢æ—¥é£ŸãŒè¦‹ã‚‰ã‚Œã‚‹ã¨äºˆæƒ³ã•ã‚Œã¦ã„ã‚‹æ—¥ã¯æ¬¡ã®ã†ã¡ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["2031å¹´5æœˆ21æ—¥", "2032å¹´11æœˆ3æ—¥", "2035å¹´9æœˆ2æ—¥", "2117å¹´12æœˆ11æ—¥"], answer: "2035å¹´9æœˆ2æ—¥", exp:"" }
            ],
            "5": [
                { question: "å¤ªé™½ç³»ã®æƒ‘æ˜Ÿã®ä¸­ã§å…¬è»¢å‘¨æœŸã®é›¢å¿ƒç‡ãŒæœ€ã‚‚å¤§ãã„ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["æ°´æ˜Ÿ", "é‡‘æ˜Ÿ", "æµ·ç‹æ˜Ÿ", "å†¥ç‹æ˜Ÿ"], answer: "æ°´æ˜Ÿ", exp:"" },
                { question: "æ­³å·®é‹å‹•ã«ã‚ˆã£ã¦åŒ—æ¥µæ˜Ÿã¯ç§»ã‚Šå¤‰ã‚ã£ã¦ã„ãã¾ã™ã€‚æ¬¡ã®ã†ã¡ã€åŒ—æ¥µæ˜Ÿã®å½¹å‰²ã¨ãªã‚‰ãªã„æ˜Ÿã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ™ã‚¬", "ãƒ‡ãƒãƒ–", "ãƒãƒ©ãƒªã‚¹", "ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³"], answer: "ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³", exp:"" },
                { question: "ãƒ‹ã‚³ãƒ©ã‚¦ã‚¹ãƒ»ã‚³ãƒšãƒ«ãƒ‹ã‚¯ã‚¹ã«ã¤ã„ã¦ã®é–“é•ã£ãŸèª¬æ˜æ–‡ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒãƒ¼ãƒ©ãƒ³ãƒ‰å‡ºèº«ã§ã‚ã‚‹", "ã€Œå¤©çƒã®å›è»¢ã«ã¤ã„ã¦ã€ã®è‘—è€…ã§ã‚ã‚Šã€åœ°å‹•èª¬ã‚’å”±ãˆãŸ", "å¤©å‹•èª¬ã‚’å¦å®šã—ãŸãŸã‚ã€ã‚«ãƒˆãƒªãƒƒã‚¯æ•™ä¼šã®å®—æ•™è£åˆ¤ã«ã‹ã‘ã‚‰ã‚ŒãŸ", "ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ãƒ«ãƒã‚µãƒ³ã‚¹æ™‚ä»£ã®å¤©æ–‡å­¦è€…ã§ã‚ã‚‹"], answer: "å¤©å‹•èª¬ã‚’å¦å®šã—ãŸãŸã‚ã€ã‚«ãƒˆãƒªãƒƒã‚¯æ•™ä¼šã®å®—æ•™è£åˆ¤ã«ã‹ã‘ã‚‰ã‚ŒãŸ", exp:"" },
                { question: "ä¸–ç•Œã§åˆã‚ã¦æœˆã«è»Ÿç€é™¸ã‚’ã—ãŸæœˆæ¢æŸ»æ©Ÿã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ«ãƒŠ2å·", "ãƒ«ãƒŠ9å·", "ã‚¢ãƒãƒ­8å·", "ã‚¢ãƒãƒ­9å·"], answer: "ãƒ«ãƒŠ9å·", exp:"" },
                { question: "ä¸–ç•Œã§åˆã‚ã¦æœ‰äººã§ã®æœˆå‘¨å›ã«æˆåŠŸã—ãŸæœˆæ¢æŸ»æ©Ÿã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ«ãƒŠ9å·", "ã‹ãã‚„", "ã‚¢ãƒãƒ­8å·", "ã‚¢ãƒãƒ­11å·"], answer: "ã‚¢ãƒãƒ­8å·", exp:"" },
                { question: "å„å›½ã®æœˆæ¢æŸ»æ©Ÿã®åå‰ã§ã€æœˆãŒç”±æ¥ã«ãªã£ã¦ã„ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ä¸­å›½ã®å«¦å¨¥", "ãƒ­ã‚·ã‚¢ã®ãƒ«ãƒŠ", "ã‚¤ãƒ³ãƒ‰ã®ãƒãƒ£ãƒ³ãƒ‰ãƒ©ãƒ¤ãƒ¼ãƒ³", "ã‚¢ãƒ¡ãƒªã‚«ã®ã‚¢ãƒãƒ­"], answer: "ã‚¢ãƒ¡ãƒªã‚«ã®ã‚¢ãƒãƒ­", exp:"" },
                { question: "æ¬¡ã®ã†ã¡ã€æœ€ã‚‚å…¬è»¢å‘¨æœŸã®çŸ­ã„å½—æ˜Ÿã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ãƒ˜ãƒ¼ãƒ«ãƒ»ãƒœãƒƒãƒ—å½—æ˜Ÿ", "ã‚¨ãƒ³ã‚±å½—æ˜Ÿ", "ãƒ¬ãƒ¢ãƒ³å½—æ˜Ÿ", "ã‚¹ãƒ¯ãƒ³å½—æ˜Ÿ"], answer: "ã‚¨ãƒ³ã‚±å½—æ˜Ÿ", exp:"" },
                { question: "ç¾åœ¨ã€æ˜Ÿç©ºä¿è­·åŒºã«èªå®šã•ã‚Œã¦ã„ãªã„å ´æ‰€ã¯ã©ã“ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç¥æ´¥å³¶(æ±äº¬)", "å—å…­å‘‚å¸«(ç¦äº•)", "è¥¿è¡¨çŸ³å£å›½ç«‹å…¬åœ’(æ²–ç¸„)", "é˜¿æ™ºæ‘(é•·é‡)"], answer: "é˜¿æ™ºæ‘(é•·é‡)", exp:"" },
                { question: "æ’æ˜Ÿã®æœ€å¾Œã®å§¿ã¨ã—ã¦æœ‰åãªã€Œè¶…æ–°æ˜Ÿçˆ†ç™ºã€ã§ã™ãŒã€ã“ã‚Œã‚’èµ·ã“ã™ã‹ã©ã†ã‹ã®å¢ƒç›®ã«ãªã‚‹ã®ã¯å¤ªé™½è³ªé‡ã®ä½•å€ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["ç´„4å€", "ç´„8å€", "ç´„16å€", "ç´„32å€"], answer: "ç´„8å€", exp:"" },
                { question: "æœ€åˆã«å›½ç”£ã®åå°„æœ›é é¡ã‚’ä½œã£ãŸã®ã¯èª°ã§ã—ã‚‡ã†ï¼Ÿ", choices: ["å²©æ©‹å–„å…µè¡›", "æ£®ä»å·¦è¡›é–€", "ä¼Šèƒ½å¿ æ•¬", "å›½å‹è—¤å…µè¡›"], answer: "å›½å‹è—¤å…µè¡›", exp:"" }
            ]
        };

        // --- 2. ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° ---
        // let: å¤‰æ•°ï¼ˆä¸­èº«ãŒå¤‰ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’å®£è¨€ã—ã¾ã™ã€‚
        // ã“ã‚Œã‚‰ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ å…¨ä½“ã§ä½¿ã†ã€ŒçŠ¶æ…‹ã€ã‚’ä¿å­˜ãƒ»ç®¡ç†ã™ã‚‹ãŸã‚ã®å¤‰æ•°ã§ã™ã€‚
        let currentQuestionIndex = 0; // ç¾åœ¨ã€ç¬¬ä½•å•ç›®ã‹ (0ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆ)
        let score = 0;                // ç¾åœ¨ã®æ­£è§£æ•°
        let quizActive = false;       // ã‚¯ã‚¤ã‚ºãŒå›ç­”å¯èƒ½çŠ¶æ…‹ã‹ (true=ã¯ã„, false=ã„ã„ãˆ)
        let shuffledQuizData = [];    // å‡ºé¡Œé †ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹é…åˆ—
        let selectedQuizData = [];    // é¸æŠã•ã‚ŒãŸé›£æ˜“åº¦ã®ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹é…åˆ—
        let currentLevel = '1';       // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«
		let startTime = 0;            // ã‚¿ã‚¤ãƒ è¨ˆæ¸¬é–‹å§‹æ™‚é–“ 

        // --- 3. DOMè¦ç´ ã®å–å¾— ---
        // HTMLã®è¦ç´ ï¼ˆéƒ¨å“ï¼‰ã‚’ã€JavaScriptã§æ“ä½œã§ãã‚‹ã‚ˆã†ã«å¤‰æ•°ã«å…¥ã‚Œã¦ã„ã¾ã™ã€‚
        // document.getElementById('IDå'): HTMLå´ã§æŒ‡å®šã—ãŸ 'id' ã‚’æŒã¤è¦ç´ ã‚’æ¢ã—ã¦å–å¾—ã—ã¾ã™ã€‚
        const homeButton = document.getElementById('home-button'); // HOMEãƒœã‚¿ãƒ³
        const difficultySelectScreen = document.getElementById('difficulty-select-screen'); // é›£æ˜“åº¦é¸æŠç”»é¢
        const startScreen = document.getElementById('start-screen');     // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢
        const quizScreen = document.getElementById('quiz-screen');       // ã‚¯ã‚¤ã‚ºç”»é¢
        const expScreen = document.getElementById('exp-screen');         // è§£èª¬ç”»é¢
        const resultScreen = document.getElementById('result-screen');   // çµæœç”»é¢
        const startButton = document.getElementById('start-button');     // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³
        const nextButton = document.getElementById('next-button');       // æ¬¡ã¸é€²ã‚€ãƒœã‚¿ãƒ³
        const scoreDisplay = document.getElementById('score-display');   // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚¨ãƒªã‚¢
        const questionNumber = document.getElementById('question-number'); // å•é¡Œç•ªå·ã‚¨ãƒªã‚¢
        const questionArea = document.getElementById('question-area');     // å•é¡Œæ–‡ã‚¨ãƒªã‚¢
        const choicesArea = document.getElementById('choices-area');       // é¸æŠè‚¢ã‚¨ãƒªã‚¢
        const feedbackArea = document.getElementById('feedback-area');     // æ­£è§£/ä¸æ­£è§£ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¨ãƒªã‚¢
        const answerArea = document.getElementById('answer-area');       // (è§£èª¬ç”»é¢ã®)æ­£è§£è¡¨ç¤ºã‚¨ãƒªã‚¢
        const expArea = document.getElementById('exp-area');         // (è§£èª¬ç”»é¢ã®)è§£èª¬æ–‡ã‚¨ãƒªã‚¢
        const resultTitle = document.getElementById('result-title');     // (çµæœç”»é¢ã®)ã‚¿ã‚¤ãƒˆãƒ«ã‚¨ãƒªã‚¢
        const finalScoreText = document.getElementById('final-score-text'); // (çµæœç”»é¢ã®)æœ€çµ‚ã‚¹ã‚³ã‚¢ã‚¨ãƒªã‚¢
        // document.querySelector('ã‚»ãƒ¬ã‚¯ã‚¿'): CSSã¨åŒã˜æ–¹æ³•ã§è¦ç´ ã‚’æ¢ã—ã¾ã™ (ã“ã‚Œã¯ h1 ã‚¿ã‚°ã‚’æ¢ã—ã¦ã„ã¾ã™)
        const mainTitle = document.querySelector('#quiz-container h1'); // ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®ã€Œå¤©æ–‡ã‚¯ã‚¤ã‚ºã€ã‚¿ã‚¤ãƒˆãƒ«
        const startScreenTitle = document.getElementById('start-screen').querySelector('h2'); // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã®ã€Œå®‡å®™ã®çŸ¥è­˜ã‚’è©¦ãã†ï¼ã€ã‚¿ã‚¤ãƒˆãƒ«
		const showRankingButton = document.getElementById('show-ranking-button'); 
		const rankingDisplayArea = document.getElementById('ranking-display-area');


        // --- 4. é–¢æ•°å®šç¾© ---
        // function é–¢æ•°å(å¼•æ•°) { ... }: ã€Œé–¢æ•°ã€ã‚’å®šç¾©ã—ã¾ã™ã€‚
        // é–¢æ•°ã¯ã€ç‰¹å®šã®å‡¦ç†ã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ãŸã‚‚ã®ã§ã€åå‰ã‚’å‘¼ã¶ã“ã¨ã§ä½•åº¦ã§ã‚‚å®Ÿè¡Œã§ãã¾ã™ã€‚

        /**
         * @function selectDifficulty
         * @description é›£æ˜“åº¦ã‚’é¸æŠã—ã€ãƒ†ãƒ¼ãƒã¨ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹
         * @param {string} level - é¸æŠã•ã‚ŒãŸé›£æ˜“åº¦ãƒ¬ãƒ™ãƒ« (ä¾‹: '1')
         */
        function selectDifficulty(level) {
            // 1. ãƒ¬ãƒ™ãƒ«ã¨ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆ
            currentLevel = level; // é¸ã°ã‚ŒãŸãƒ¬ãƒ™ãƒ«ã‚’ä¿å­˜
            selectedQuizData = allQuizData[currentLevel]; // å…¨ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€é¸ã°ã‚ŒãŸãƒ¬ãƒ™ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã™

            // 2. ã‚¿ã‚¤ãƒˆãƒ«ã¨å•é¡Œæ•°ã‚’æ›´æ–°
            mainTitle.textContent = `å¤©æ–‡ã‚¯ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«${currentLevel}`; // ä¸Šéƒ¨ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´
            const totalQuestions = selectedQuizData.length; // å•é¡Œæ•°ã‚’å–å¾—
            startScreenTitle.textContent = `å…¨${totalQuestions}å•ï¼å®‡å®™ã®çŸ¥è­˜ã‚’è©¦ãã†ï¼`; // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´
            scoreDisplay.textContent = `ã‚¹ã‚³ã‚¢: 0 / ${totalQuestions}`; // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’åˆæœŸåŒ–

            // 3. ç”»é¢ã‚’åˆ‡ã‚Šæ›¿ãˆ
            // classList.add('hidden'): 'hidden' ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¦éè¡¨ç¤ºã«ã™ã‚‹
            // classList.remove('hidden'): 'hidden' ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤ã—ã¦è¡¨ç¤ºã™ã‚‹
            difficultySelectScreen.classList.add('hidden'); // é›£æ˜“åº¦é¸æŠç”»é¢ã‚’éš ã™
            startScreen.classList.remove('hidden');       // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹
            homeButton.classList.remove('hidden');        // HOMEãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹
        }

        /**
         * @function handleHomeClick
         * @description HOMEãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚ã®å‡¦ç†ã€‚ã‚¯ã‚¤ã‚ºä¸­ã‹åˆ¤å®šã—ã¦ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’å‡ºã™
         */
        function handleHomeClick() {
            // ã‚¯ã‚¤ã‚ºç”»é¢ã¾ãŸã¯è§£èª¬ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆ= hiddenã‚¯ãƒ©ã‚¹ãŒä»˜ã„ã¦ã„ãªã„ã‹ï¼‰
            const isQuizInProgress = !quizScreen.classList.contains('hidden') || !expScreen.classList.contains('hidden');

            // ã‚‚ã—ã‚¯ã‚¤ã‚ºé€²è¡Œä¸­ãªã‚‰
            if (isQuizInProgress) {
                // confirm() ã§ã€ŒOKã€ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆè­¦å‘Šï¼‰ã‚’è¡¨ç¤º
                if (confirm("ã‚¯ã‚¤ã‚ºã®é€²è¡Œåº¦ã¯å¤±ã‚ã‚Œã¾ã™ã€‚ãã‚Œã§ã‚‚ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ")) {
                    // ã€ŒOKã€(true) ãŒæŠ¼ã•ã‚ŒãŸã‚‰HOMEã«æˆ»ã‚‹
                    returnToHome();
                } else {
                    // ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€(false) ãŒæŠ¼ã•ã‚ŒãŸã‚‰ä½•ã‚‚ã—ãªã„
                }
            } else {
                // ã‚¯ã‚¤ã‚ºä¸­ã§ãªã‘ã‚Œã°ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã‚„çµæœç”»é¢ï¼‰ã€ç¢ºèªãªã—ã§HOMEã«æˆ»ã‚‹
                returnToHome();
            }
        }

        /**
         * @function returnToHome
         * @description çŠ¶æ…‹ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆã—ã€é›£æ˜“åº¦é¸æŠç”»é¢ï¼ˆHOMEï¼‰ã«æˆ»ã‚‹
         */
        function returnToHome() {
            // 1. ã™ã¹ã¦ã®ç”»é¢ã‚’éè¡¨ç¤ºã«ã™ã‚‹
            startScreen.classList.add('hidden');
            quizScreen.classList.add('hidden');
            expScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');

            // 2. é›£æ˜“åº¦é¸æŠç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹
            difficultySelectScreen.classList.remove('hidden');

            // 3. HOMEãƒœã‚¿ãƒ³è‡ªä½“ã‚’éè¡¨ç¤ºã«ã™ã‚‹
            homeButton.classList.add('hidden');

            // 4. ã‚¿ã‚¤ãƒˆãƒ«ã‚„ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™
            mainTitle.textContent = "å¤©æ–‡ã‚¯ã‚¤ã‚º";
            scoreDisplay.textContent = "ã‚¹ã‚³ã‚¢: 0 / 0";
            startScreenTitle.textContent = "å®‡å®™ã®çŸ¥è­˜ã‚’è©¦ãã†ï¼"; // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚‚ãƒªã‚»ãƒƒãƒˆ

            // 6. ã‚¯ã‚¤ã‚ºã®çŠ¶æ…‹ç®¡ç†å¤‰æ•°ã‚’ãƒªã‚»ãƒƒãƒˆ
			closeRankingDisplay();
            currentQuestionIndex = 0;
            score = 0;
            quizActive = false;
            shuffledQuizData = [];
            selectedQuizData = [];
            currentLevel = '1'; // ï¼ˆå¿µã®ãŸã‚åˆæœŸãƒ¬ãƒ™ãƒ«ã«æˆ»ã™ï¼‰
        }


        /**
         * @function shuffleArray
         * @description é…åˆ—ã®è¦ç´ ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹ï¼ˆãƒ•ã‚£ãƒƒã‚·ãƒ£ãƒ¼ãƒ»ã‚¤ã‚§ãƒ¼ãƒ„ã®ã‚·ãƒ£ãƒƒãƒ•ãƒ«ï¼‰
         * @param {array} array - ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸã„é…åˆ—
         * @returns {array} - ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚ŒãŸæ–°ã—ã„é…åˆ—
         */
        function shuffleArray(array) {
            let newArray = array.slice(); // å…ƒã®é…åˆ—ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ã—ã„é…åˆ—ã‚’ä½œã‚‹
            // é…åˆ—ã®å¾Œã‚ã‹ã‚‰é †ç•ªã«ã€ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã‚“ã è¦ç´ ã¨å…¥ã‚Œæ›¿ãˆã¦ã„ã
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]]; 
            }
            return newArray; // ã‚·ãƒ£ãƒƒãƒ•ãƒ«å¾Œã®é…åˆ—ã‚’è¿”ã™
        }

        /**
         * @function startGame
         * @description ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹
         */
        function startGame() {
            // é¸ã°ã‚ŒãŸé›£æ˜“åº¦ã®ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦ã€å‡ºé¡Œç”¨ãƒ‡ãƒ¼ã‚¿(shuffledQuizData)ã«ä¿å­˜
            shuffledQuizData = shuffleArray(selectedQuizData);
            currentQuestionIndex = 0; // å•é¡Œç•ªå·ã‚’ãƒªã‚»ãƒƒãƒˆ (0å•ç›®ã‹ã‚‰)
            score = 0;                // ã‚¹ã‚³ã‚¢ã‚’ãƒªã‚»ãƒƒãƒˆ
            quizActive = true;        // å›ç­”å¯èƒ½ãªçŠ¶æ…‹ã«ã™ã‚‹
			startTime = Date.now();   // ã‚¿ã‚¤ãƒ è¨ˆæ¸¬é–‹å§‹
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            startScreen.classList.add('hidden');  // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã‚’éš ã™
            resultScreen.classList.add('hidden'); // çµæœç”»é¢ã‚’éš ã™
            expScreen.classList.add('hidden');    // è§£èª¬ç”»é¢ã‚’éš ã™
            quizScreen.classList.remove('hidden'); // ã‚¯ã‚¤ã‚ºç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹
            
            updateScoreDisplay(); // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’æ›´æ–° (0 / 10 ã®ã‚ˆã†ã«)
            displayQuestion();    // æœ€åˆã®å•é¡Œã‚’è¡¨ç¤º
        }

        /**
         * @function updateScoreDisplay
         * @description ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ã‚’ç”»é¢ä¸Šéƒ¨ã®ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚¨ãƒªã‚¢ã«åæ˜ ã™ã‚‹
         */
        function updateScoreDisplay() {
            scoreDisplay.textContent = `ã‚¹ã‚³ã‚¢: ${score} / ${shuffledQuizData.length}`;
        }

        /**
         * @function displayQuestion
         * @description æ¬¡ã®å•é¡Œã‚’è¡¨ç¤ºã™ã‚‹ã€‚ã‚‚ã—å…¨å•çµ‚äº†ã—ã¦ã„ã‚Œã°çµæœç”»é¢ã¸
         */
        function displayQuestion() {
            // è§£èª¬ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°éš ã—ã€ã‚¯ã‚¤ã‚ºç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹
            expScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');

            // ã‚‚ã—ç¾åœ¨ã®å•é¡Œç•ªå·(index)ãŒå•é¡Œæ•°ä»¥ä¸Šãªã‚‰ã€å…¨å•çµ‚äº†
            if (currentQuestionIndex >= shuffledQuizData.length) {
                endGame(); // çµæœç™ºè¡¨é–¢æ•°ã‚’å‘¼ã¶
                return;    // ã“ã®é–¢æ•°ã®å‡¦ç†ã‚’ã“ã“ã§çµ‚äº†
            }

            // å‡ºé¡Œã™ã‚‹ç¾åœ¨ã®ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const currentQuiz = shuffledQuizData[currentQuestionIndex];
            
            // å•é¡Œç•ªå·ã¨å•é¡Œæ–‡ã‚’ç”»é¢ã«è¡¨ç¤º
            // (indexã¯0ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§ã€+1 ã—ã¦ã€Œå•é¡Œ 1ã€ã®ã‚ˆã†ã«è¡¨ç¤º)
            questionNumber.textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${shuffledQuizData.length}`;
            questionArea.textContent = currentQuiz.question;
            
            // é¸æŠè‚¢ã‚¨ãƒªã‚¢(choicesArea)ã®ä¸­èº«ã‚’ä¸€æ—¦ç©ºã«ã™ã‚‹
            choicesArea.innerHTML = ''; 

            // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã® choices (é¸æŠè‚¢ã®é…åˆ—) ã‚’1ã¤ãšã¤å–ã‚Šå‡ºã—ã¦ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
            currentQuiz.choices.forEach(choice => {
                // <button> è¦ç´ ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ä½œæˆ
                const button = document.createElement('button');
                button.textContent = choice; // ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠè‚¢ã®æ–‡å­—åˆ—ã«è¨­å®š
                
                // ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆã‚¯ãƒ©ã‚¹ï¼‰ã‚’è¨­å®š
                button.classList.add(
                    'choice-button', 'p-4', 'bg-gray-800', 'text-gray-100', 'font-semibold',
                    'rounded-lg', 'text-left', 'shadow-md', 'transition', 'duration-200'
                );
                
                // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‹•ä½œã‚’è¨­å®š
                // 'click' ã—ãŸã‚‰ã€checkAnsweré–¢æ•°ã‚’å‘¼ã¶
                button.addEventListener('click', () => checkAnswer(choice, button));
                
                // ä½œæˆã—ãŸãƒœã‚¿ãƒ³ã‚’HTMLã® choicesArea ã«è¿½åŠ 
                choicesArea.appendChild(button);
            });
            
            quizActive = true; // å›ç­”å¯èƒ½ãªçŠ¶æ…‹ã«ã™ã‚‹
            feedbackArea.textContent = ''; // æ­£è§£/ä¸æ­£è§£ã®è¡¨ç¤ºã‚’ç©ºã«ã™ã‚‹
        }

        /**
         * @function checkAnswer
         * @description é¸æŠã•ã‚ŒãŸç­”ãˆãŒåˆã£ã¦ã„ã‚‹ã‹åˆ¤å®šã™ã‚‹
         * @param {string} selectedChoice - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸ã‚“ã é¸æŠè‚¢ã®æ–‡å­—åˆ—
         * @param {HTMLElement} selectedButton - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ¼ã—ãŸãƒœã‚¿ãƒ³è¦ç´ 
         */
        function checkAnswer(selectedChoice, selectedButton) {
            // ã‚‚ã— quizActive ãŒ false (å›ç­”ä¸å¯çŠ¶æ…‹) ãªã‚‰ã€ä½•ã‚‚ã›ãšå‡¦ç†ã‚’çµ‚äº†
            // (é€£æ‰“é˜²æ­¢ã®ãŸã‚)
            if (!quizActive) return;
            quizActive = false; // å›ç­”ä¸å¯çŠ¶æ…‹ã«ã™ã‚‹

            // ç¾åœ¨ã®å•é¡Œã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const currentQuiz = shuffledQuizData[currentQuestionIndex];
            // é¸ã‚“ã ç­”ãˆ(selectedChoice)ã¨æ­£è§£(currentQuiz.answer)ãŒåŒã˜ã‹åˆ¤å®š
            const isCorrect = selectedChoice === currentQuiz.answer;

            // é¸æŠè‚¢ãƒœã‚¿ãƒ³ã™ã¹ã¦ã«å¯¾ã—ã¦å‡¦ç†
            Array.from(choicesArea.children).forEach(button => {
                button.disabled = true; // ãƒœã‚¿ãƒ³ã‚’æŠ¼ã›ãªã„ã‚ˆã†ã«ã™ã‚‹
                
                // ã‚‚ã—ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆãŒæ­£è§£ã®ç­”ãˆãªã‚‰
                if (button.textContent === currentQuiz.answer) {
                    button.classList.add('bg-green-600', 'ring-4', 'ring-green-400'); // ç·‘è‰²ã«ã™ã‚‹
                    button.classList.remove('bg-gray-800'); // å…ƒã®ç°è‰²ã‚’æ¶ˆã™
                // ã‚‚ã—ã€æŠ¼ã—ãŸãƒœã‚¿ãƒ³(selectedButton)ã§ã€ã‹ã¤ã€ä¸æ­£è§£(isCorrectãŒfalse)ãªã‚‰
                } else if (button === selectedButton && !isCorrect) {
                    button.classList.add('bg-red-600', 'ring-4', 'ring-red-400'); // èµ¤è‰²ã«ã™ã‚‹
                    button.classList.remove('bg-gray-800'); // å…ƒã®ç°è‰²ã‚’æ¶ˆã™
                }
            });

            // æ­£è§£ã ã£ãŸå ´åˆ
            if (isCorrect) {
                score++; // ã‚¹ã‚³ã‚¢ã‚’1å¢—ã‚„ã™
                feedbackArea.textContent = 'âœ… æ­£è§£ï¼ï¼';
                feedbackArea.classList.remove('text-red-500'); // èµ¤æ–‡å­—ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
                feedbackArea.classList.add('text-green-500'); // ç·‘æ–‡å­—ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            // ä¸æ­£è§£ã ã£ãŸå ´åˆ
            } else {
                feedbackArea.textContent = 'âŒ ä¸æ­£è§£...';
                feedbackArea.classList.remove('text-green-500'); // ç·‘æ–‡å­—ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
                feedbackArea.classList.add('text-red-500');   // èµ¤æ–‡å­—ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            }
            
            updateScoreDisplay(); // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’æ›´æ–°
            
            // 2ç§’å¾Œï¼ˆ2000ãƒŸãƒªç§’å¾Œï¼‰ã« showExplanation é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹
            setTimeout(showExplanation, 2000);
        }

        /**
         * @function showExplanation
         * @description è§£èª¬ç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹
         */
        function showExplanation(){
            // ç¾åœ¨ã®å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const currentQuiz = shuffledQuizData[currentQuestionIndex];
            
            // æ­£è§£ã¨è§£èª¬æ–‡ã‚’ç”»é¢ã«ã‚»ãƒƒãƒˆ
            answerArea.textContent = currentQuiz.answer;
            // ã‚‚ã—è§£èª¬æ–‡(exp)ãŒç©ºãªã‚‰ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            expArea.textContent = currentQuiz.exp || 'è§£èª¬ã¯æº–å‚™ä¸­ã§ã™ã€‚'; 
            
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            quizScreen.classList.add('hidden'); // ã‚¯ã‚¤ã‚ºç”»é¢ã‚’éš ã™
            expScreen.classList.remove('hidden'); // è§£èª¬ç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹
        }

        /**
         * @function nextQuestion
         * @description æ¬¡ã®å•é¡Œã¸é€²ã‚€ï¼ˆã€Œæ¬¡ã¸é€²ã‚€ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚ã«å‘¼ã°ã‚Œã‚‹ï¼‰
         */
        function nextQuestion() {
            expScreen.classList.add('hidden'); // è§£èª¬ç”»é¢ã‚’éš ã™
            currentQuestionIndex++; // å•é¡Œç•ªå·ã‚’1å¢—ã‚„ã™
            displayQuestion(); // æ¬¡ã®å•é¡Œã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°ã‚’å‘¼ã¶
        }

        /**
         * @function endGame
         * @description ã‚¯ã‚¤ã‚ºãŒã™ã¹ã¦çµ‚äº†ã—ãŸæ™‚ã«å‘¼ã°ã‚Œã€çµæœç”»é¢ã¨ã‚¹ã‚³ã‚¢é€ä¿¡å‡¦ç†ã‚’è¡Œã†
         */
        function endGame() {
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            quizScreen.classList.add('hidden');
            expScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
			// ã‚¿ã‚¤ãƒ è¨ˆæ¸¬çµ‚äº†
            const endTime = Date.now();
			const clearTime = (endTime - startTime) / 1000;
            // (endTime - startTime) ã¯ãƒŸãƒªç§’ãªã®ã§ã€1000ã§å‰²ã£ã¦ç§’å˜ä½ã«ã™ã‚‹
			const formattedTime = formatTime(clearTime);
            const total = shuffledQuizData.length;
            
            // ã‚¹ã‚³ã‚¢ã«å¿œã˜ã¦çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰æ›´
            let titleText = "";
            if (score === total) {
                titleText = "æº€ç‚¹ï¼Perafectï¼";
            } else if (score >= total * 0.7) {
                titleText = "7å‰²è¶Šãˆï¼ã™ã”ã„ï¼ï¼";
            } else {
                titleText = "å†åº¦æŒ‘æˆ¦ï¼!";
            }
            
            // çµæœç”»é¢ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨æœ€çµ‚ã‚¹ã‚³ã‚¢ã‚’è¡¨ç¤º
            resultTitle.textContent = titleText; 
            finalScoreText.textContent = `${score} / ${total} (${formattedTime})`; 
            scoreDisplay.textContent = `æœ€çµ‚ã‚¹ã‚³ã‚¢: ${score} / ${total}`;

            // --- â–¼â–¼â–¼ ãƒ©ãƒ³ã‚­ãƒ³ã‚°é€ä¿¡å‡¦ç† â–¼â–¼â–¼ ---
            setTimeout(() => {
                const userName = prompt("ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ç™»éŒ²ã™ã‚‹åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯ï¼‰", "åç„¡ã—ã®å®‡å®™åšå£«");
                
                if (userName) {
                    // â˜…postData ã« level ã¨ time ã‚’è¿½åŠ  (ä¿®æ­£)
                    const postData = {
                        name: userName,
                        score: score,
                        level: currentLevel, // ç¾åœ¨ã®ãƒ¬ãƒ™ãƒ«
                        time: clearTime      // ã‚¯ãƒªã‚¢ã‚¿ã‚¤ãƒ 
                    };

                    alert("ã‚¹ã‚³ã‚¢ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™...");

                    // fetch API (é€ä¿¡å‡¦ç†è‡ªä½“ã¯å¤‰æ›´ãªã—)
                    fetch(GAS_WEB_APP_URL, {
                        method: 'POST',
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'text/plain;charset=utf-8',
                        },
                        body: JSON.stringify(postData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            // â˜…ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿®æ­£
                            alert(`${userName}ã•ã‚“ (ãƒ¬ãƒ™ãƒ«${data.level}) ã®ã‚¹ã‚³ã‚¢ã€Œ${data.score}ç‚¹ / ${formattedTime}ã€ã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼`);
                        } else {
                            throw new Error(data.message);
                        }
                    })
                    .catch(error => {
                        console.error('ã‚¹ã‚³ã‚¢é€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
                        alert('ã‚¹ã‚³ã‚¢ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n' + error.message);
                    });
                }
            }, 500); // 0.5ç§’å¾Œã«å®Ÿè¡Œ
            // --- â–²â–²â–² ãƒ©ãƒ³ã‚­ãƒ³ã‚°é€ä¿¡å‡¦ç†ã“ã“ã¾ã§ â–²â–²â–² ---
        }
		function formatTime(totalFloatSeconds) {
            // å°‘æ•°ç‚¹ä»¥ä¸‹ã‚’åˆ‡ã‚Šæ¨ã¦ã¦æ•´æ•°ç§’ã«ã™ã‚‹
            const totalIntSeconds = Math.floor(totalFloatSeconds);
            
            // åˆ†ã‚’è¨ˆç®—
            const minutes = Math.floor(totalIntSeconds / 60);
            // æ®‹ã‚Šã®ç§’ã‚’è¨ˆç®—
            const seconds = totalIntSeconds % 60;

            if (minutes > 0) {
                // 1åˆ†ä»¥ä¸Šã®å ´åˆ
                return `${minutes}åˆ†${seconds}ç§’`;
            } else {
                // 1åˆ†æœªæº€ã®å ´åˆ
                return `${seconds}ç§’`;
            }
        }
		
        /**
         * @function displayRanking
         * @description GASã‹ã‚‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ç”»é¢ã«è¡¨ç¤ºã™ã‚‹
         */
        function displayRanking() {
            // æ—¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´åˆã¯éè¡¨ç¤ºã«æˆ»ã™
            if (!rankingDisplayArea.classList.contains('hidden')) {
                closeRankingDisplay(); // é–‰ã˜ã‚‹é–¢æ•°ã‚’å‘¼ã¶
                return;
            }

            // ãƒ¬ãƒ™ãƒ«é¸æŠç”»é¢ã‚’è¡¨ç¤º
            document.getElementById('ranking-level-select').classList.remove('hidden');
            // ï¼ˆã‚‚ã—é–‹ã„ã¦ã„ãŸã‚‰ï¼‰çµæœè¡¨ç¤ºç”»é¢ã¯éš ã™
            document.getElementById('ranking-result-display').classList.add('hidden');
            
            // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¨ãƒªã‚¢å…¨ä½“ã‚’è¡¨ç¤º
            rankingDisplayArea.classList.remove('hidden');
        }

        /**
         * @function fetchAndDisplayRanking
         * @description æŒ‡å®šã•ã‚ŒãŸãƒ¬ãƒ™ãƒ«ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’GASã‹ã‚‰å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹
         * @param {string} level - å–å¾—ã—ãŸã„ãƒ¬ãƒ™ãƒ« ('1', '2', ...)
         */
        function fetchAndDisplayRanking(level) {
            const levelSelectArea = document.getElementById('ranking-level-select');
            const resultDisplayArea = document.getElementById('ranking-result-display');

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            resultDisplayArea.innerHTML = `<p class="text-center">ãƒ¬ãƒ™ãƒ« ${level} ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>`;
            
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆï¼ˆãƒ¬ãƒ™ãƒ«é¸æŠã‚’éš ã—ã€çµæœè¡¨ç¤ºã‚’è¦‹ã›ã‚‹ï¼‰
            levelSelectArea.classList.add('hidden');
            resultDisplayArea.classList.remove('hidden');

            // â˜…fetch API (GETãƒªã‚¯ã‚¨ã‚¹ãƒˆ) ã« ?level= ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
            fetch(GAS_WEB_APP_URL + "?level=" + level) 
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'error') {
                        throw new Error(data.message);
                    }
                    
                    let html = `<h3 class="text-xl font-bold text-yellow-400 text-center mb-3">ğŸ† ãƒ¬ãƒ™ãƒ« ${level} TOP 10 ğŸ†</h3>`;
                    
                    if (data.length === 0) {
                        html += '<p class="text-center">ã¾ã ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                    } else {
                        html += '<ol class="list-decimal list-inside space-y-2">';
                        
                        data.forEach((item, index) => {
                            let medal = '';
                            if(index === 0) medal = 'ğŸ¥‡';
                            if(index === 1) medal = 'ğŸ¥ˆ';
                            if(index === 2) medal = 'ğŸ¥‰';
                            
                            // â˜…ã‚¹ã‚³ã‚¢ã¨ã‚¿ã‚¤ãƒ (item.time)ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
                            const formattedTime = formatTime(item.time);
                            html += `<li>${medal} <strong>${item.name}</strong>: ${item.score}ç‚¹ (${formattedTime})</li>`;
                        });
                        
                        html += '</ol>';
                    }
                    
                    // ã€Œãƒ¬ãƒ™ãƒ«é¸æŠã«æˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
                    // displayRanking()ã‚’å‘¼ã¶ã¨ã€ãƒ¬ãƒ™ãƒ«é¸æŠç”»é¢ã«æˆ»ã‚‹
                    html += '<button onclick="displayRanking()" class="mt-4 w-full p-2 bg-gray-600 hover:bg-gray-700 rounded">ãƒ¬ãƒ™ãƒ«é¸æŠã«æˆ»ã‚‹</button>';
                    
                    resultDisplayArea.innerHTML = html;
                })
                .catch(error => {
                    console.error('ãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                    resultDisplayArea.innerHTML = `<p class="text-center text-red-500">ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p><button onclick="displayRanking()" class="mt-4 w-full p-2 bg-gray-600 hover:bg-gray-700 rounded">ãƒ¬ãƒ™ãƒ«é¸æŠã«æˆ»ã‚‹</button>`;
                });
        }
        // --- 5. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç™»éŒ² ---
        // addEventListener: HTMLè¦ç´ ãŒã€Œï½ã•ã‚ŒãŸæ™‚ã€ã«ã€Œï½ã™ã‚‹ã€ã¨ã„ã†å‡¦ç†ã‚’äºˆç´„ã—ã¾ã™ã€‚
        
        // 'home-button' ãŒ 'click' ã•ã‚ŒãŸæ™‚ã€'handleHomeClick' é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹
        homeButton.addEventListener('click', handleHomeClick); 
        // 'start-button' ãŒ 'click' ã•ã‚ŒãŸæ™‚ã€'startGame' é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹
        startButton.addEventListener('click', startGame);
        // 'next-button' ãŒ 'click' ã•ã‚ŒãŸæ™‚ã€'nextQuestion' é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹
        nextButton.addEventListener('click', nextQuestion); 
        showRankingButton.addEventListener('click', displayRanking);
        // â–²â–²â–² JavaScriptã®å‡¦ç†çµ‚äº† â–²â–²â–²
    </script>
</body>
</html>